"use strict";(self.webpackChunkworldtool_docs=self.webpackChunkworldtool_docs||[]).push([[550],{9614:(e,o,t)=>{t.r(o),t.d(o,{assets:()=>i,contentTitle:()=>r,default:()=>c,frontMatter:()=>s,metadata:()=>l,toc:()=>p});var n=t(7462),a=(t(7294),t(3905));const s={sidebar_position:5},r="General Tool Operations",l={unversionedId:"making-a-plugin/general-tool-operations",id:"making-a-plugin/general-tool-operations",title:"General Tool Operations",description:"To add a button to either open your operation menu or start your operation, use the uigeneral/pluginpage hook.",source:"@site/docs/making-a-plugin/general-tool-operations.md",sourceDirName:"making-a-plugin",slug:"/making-a-plugin/general-tool-operations",permalink:"/worldtool-docs/docs/making-a-plugin/general-tool-operations",draft:!1,tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"Processes",permalink:"/worldtool-docs/docs/making-a-plugin/processes"},next:{title:"Brushes",permalink:"/worldtool-docs/docs/making-a-plugin/brushes"}},i={},p=[{value:"Menu",id:"menu",level:2},{value:"Block Selection",id:"block-selection",level:2},{value:"Start",id:"start",level:2},{value:"Set Up Process",id:"set-up-process",level:2},{value:"Run Process",id:"run-process",level:2}],u={toc:p};function c(e){let{components:o,...t}=e;return(0,a.kt)("wrapper",(0,n.Z)({},u,t,{components:o,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"general-tool-operations"},"General Tool Operations"),(0,a.kt)("p",null,"To add a button to either open your operation menu or start your operation, use the ",(0,a.kt)("a",{parentName:"p",href:"hooks#ui_generalplugin_page"},(0,a.kt)("inlineCode",{parentName:"a"},"ui_general/plugin_page")," hook"),"."),(0,a.kt)("h2",{id:"menu"},"Menu"),(0,a.kt)("p",null,"A General Tool operation menu can look something like this:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-mcfunction"},'# Example starting menu for a General Tool operation\n\nfunction worldtool:ui/clear_chat\n\n# Don\'t forget to remove this tag with the "ui/remove_menu_tags" hook\ntag @s add myplugin.menu.example\n\n# Back button specifically for going back to the General Tool\'s main menu\n# For non-specific back buttons, use worldtool:ui/back_button and the "ui/back_using_tags" hook\nfunction worldtool:ui_general/back_button\n\n# Display the menu itself\ntellraw @s {"nbt":"Translation.\\"some_menu_text\\"","storage":"worldtool:storage"}\n\n# Display a close button\nfunction worldtool:ui/close_button\n\n# This makes the feedback message not show up for this function\nfunction worldtool:ui/anti_feedback_chat_message/load\n')),(0,a.kt)("h2",{id:"block-selection"},"Block Selection"),(0,a.kt)("p",null,"If you want a ",(0,a.kt)("a",{parentName:"p",href:"../chat-menu-system#block-selection"},"block selection menu")," directly on your main menu, call the ",(0,a.kt)("inlineCode",{parentName:"p"},"primary"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"secondary")," or ",(0,a.kt)("inlineCode",{parentName:"p"},"both")," function inside ",(0,a.kt)("inlineCode",{parentName:"p"},"worldtool:ui_general/input/start")," and then use the ",(0,a.kt)("a",{parentName:"p",href:"hooks#inputprimary_block"},(0,a.kt)("inlineCode",{parentName:"a"},"input/primary_block"))," and/or ",(0,a.kt)("a",{parentName:"p",href:"hooks#inputsecondary_block"},(0,a.kt)("inlineCode",{parentName:"a"},"input/secondary_block"))," hooks to run something when a block is selected."),(0,a.kt)("h2",{id:"start"},"Start"),(0,a.kt)("p",null,"General Tool operations are started with a function that adds a setup tag and runs the function ",(0,a.kt)("inlineCode",{parentName:"p"},"worldtool:process_start/common/load"),". Make sure to remove the tag in the ",(0,a.kt)("a",{parentName:"p",href:"hooks#uiremove_menu_tags"},(0,a.kt)("inlineCode",{parentName:"a"},"ui/remove_menu_tags")," hook"),"."),(0,a.kt)("h2",{id:"set-up-process"},"Set Up Process"),(0,a.kt)("p",null,"Use the ",(0,a.kt)("a",{parentName:"p",href:"hooks#process_startcommonsetup_process"},(0,a.kt)("inlineCode",{parentName:"a"},"process_start/common/setup_process")," hook")," to check for your setup and run a function to set up your process."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-mcfunction"},'# Example of a process setup function\n\n# Tell the function that sets up all the processes that everything is alright\nscoreboard players set #success worldtool 1\n\ndata modify storage worldtool:storage Processes prepend value {ProcessName:\'{"nbt":"Translation.\\"myplugin.process.example\\"","storage":"worldtool:storage"}\',ID:"myplugin:example",Tags:["myplugin.process.example"]}\n# If you have set up blocks per tick data for this process\ndata modify storage worldtool:storage Processes[0].BlocksPerTick set from storage worldtool:storage BlocksPerTick.Processes[{ID:"myplugin:example"}]\n\nfunction worldtool:process_start/general/set_process_values\n\n# Remove the setup tag\ntag @s remove myplugin.setup.example\n\n# This last line is unneeded if your process does not affect anything\nfunction worldtool:technical/save_load/backup/load\n')),(0,a.kt)("p",null,"If you want your menu to re-open after the process has started, use the ",(0,a.kt)("a",{parentName:"p",href:"hooks#uireopen_menuafter_startingq"},(0,a.kt)("inlineCode",{parentName:"a"},"ui/reopen_menu/after_starting")," hook"),"."),(0,a.kt)("h2",{id:"run-process"},"Run Process"),(0,a.kt)("p",null,"Main page: ",(0,a.kt)("a",{parentName:"p",href:"processes"},"Processes"),"."))}c.isMDXComponent=!0}}]);